(function(n){var e="select",s="checkbox",f="undefined",a=":submit,input:image",l="textarea",r=!0,i=!1,t=null,o="function",u="image";function h(i){var f=this,r=f.form,e;r.clk=f,f.type==u&&(i.offsetX!=undefined?(r.clk_x=i.offsetX,r.clk_y=i.offsetY):typeof n.fn.offset==o?(e=n(f).offset(),r.clk_x=i.pageX-e.left,r.clk_y=i.pageY-e.top):(r.clk_x=i.pageX-f.offsetLeft,r.clk_y=i.pageY-f.offsetTop)),setTimeout(function(){r.clk=r.clk_x=r.clk_y=t},10)}function c(){var r=this.formPluginId,t=n.fn.ajaxForm.optionHash[r];return n(this).ajaxSubmit(t),i}n.fn.ajaxSubmit=function(u,f,e){var s=this;function d(){function c(){var y,o,h,w;if(!p++){e.detachEvent?e.detachEvent("onload",c):e.removeEventListener("load",c,i),y=r;try{if(v)throw"timeout";h=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document,f.responseText=h.body?h.body.innerHTML:t,f.responseXML=h.XMLDocument?h.XMLDocument:h,u.dataType=="json"||u.dataType=="script"?(w=h.getElementsByTagName(l)[0],o=w?w.value:f.responseText,u.dataType=="json"?eval("data = "+o):n.globalEval(o)):u.dataType=="xml"?(o=f.responseXML,o||f.responseText==t||(o=b(f.responseText))):o=f.responseText}catch(k){y=i,n.handleError(u,f,"error",k)}y&&(u.success(o,"success"),s&&n.event.trigger("ajaxSuccess",[f,u])),s&&n.event.trigger("ajaxComplete",[f,u]),s&&!--n.active&&n.event.trigger("ajaxStop"),u.complete&&u.complete(f,y?"success":"error"),setTimeout(function(){a.remove(),f.responseXML=t},100)}}function b(n,i){return window.ActiveXObject?(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n)):i=(new DOMParser).parseFromString(n,"text/xml"),i&&i.documentElement&&i.documentElement.tagName!="parsererror"?i:t}var w=h[0],u=n.extend({},n.ajaxSettings,o),y="jqFormIO"+n.fn.ajaxSubmit.counter++,a=n('<iframe id="'+y+'" name="'+y+'" />'),e=a[0],k=n.browser.opera&&window.opera.version()<9,f,s,p,v;(n.browser.msie||k)&&(e.src='javascript:false;document.write("");'),a.css({position:"absolute",top:"-1000px",left:"-1000px"}),f={responseText:t,responseXML:t,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}},s=u.global,s&&!n.active++&&n.event.trigger("ajaxStart"),s&&n.event.trigger("ajaxSend",[f,u]),p=0,v=0,setTimeout(function(){a.appendTo("body"),e.attachEvent?e.attachEvent("onload",c):e.addEventListener("load",c,i);var t=w.encoding?"encoding":"enctype",n=h.attr("target");h.attr({target:y,method:"POST",encAttr:"multipart/form-data",action:u.url}),u.timeout&&setTimeout(function(){v=r,c()},u.timeout),w.submit(),h.attr("target",n)},10)}var o={url:u,type:f,success:e},w=s.formToArray(o.semantic),b,p,h,c,k,v,y,a;if(o.beforeSubmit&&o.beforeSubmit(w,s,o)===i||(b={},n.event.trigger("form.submit.validate",[w,s,o,b]),b.veto))return s;for(p=n.param(w),o.type.toUpperCase()=="GET"?(o.url+=(o.url.indexOf("?")>=0?"&":"?")+p,o.data=t):o.data=p,h=s,c=[],o.resetForm&&c.push(function(){h.resetForm()}),o.clearForm&&c.push(function(){h.clearForm()}),!o.dataType&&o.target?(k=o.success,c.push(function(t){n(o.target).attr("innerHTML",t).evalScripts().each(k,arguments)})):o.success&&c.push(o.success),o.success=function(n,t){for(var i=0,r=c.length;i<r;i++)c[i](n,t,h)},v=n("input:file",s).fieldValue(),y=i,a=0;a<v.length;a++)v[a]&&(y=r);return o.iframe||y?d():n.ajax(o),n.event.trigger("form.submit.notify",[s,o]),s},n.fn.ajaxSubmit.counter=0,n.fn.ajaxForm=function(t){return this.ajaxFormUnbind().submit(c).each(function(){this.formPluginId=n.fn.ajaxForm.counter++,n.fn.ajaxForm.optionHash[this.formPluginId]=t,n(a,this).click(h)})},n.fn.ajaxForm.counter=1,n.fn.ajaxForm.optionHash={},n.fn.ajaxFormUnbind=function(){return this.unbind("submit",c),this.each(function(){n(a,this).unbind("click",h)})},n.fn.formToArray=function(i){var c=[],e,p,l,h,y,b,w,s,v,a,o;if(this.length==0||(e=this[0],p=i?e.getElementsByTagName("*"):e.elements,!p))return c;for(s=0,v=p.length;s<v;s++)if(l=p[s],o=l.name,o){if(i&&e.clk&&l.type==u){l.disabled||e.clk!=l||c.push({name:o+".x",value:e.clk_x},{name:o+".y",value:e.clk_y});continue}if(h=n.fieldValue(l,r),h&&h.constructor==Array)for(y=0,b=h.length;y<b;y++)c.push({name:o,value:h[y]});else h!==t&&typeof h!=f&&c.push({name:o,value:h})}if(!i&&e.clk)for(w=e.getElementsByTagName("input"),s=0,v=w.length;s<v;s++)a=w[s],o=a.name,o&&!a.disabled&&a.type==u&&e.clk==a&&c.push({name:o+".x",value:e.clk_x},{name:o+".y",value:e.clk_y});return c},n.fn.formSerialize=function(t){return n.param(this.formToArray(t))},n.fn.fieldSerialize=function(i){var r=[];return this.each(function(){var s=this.name,u,e,o;if(s)if(u=n.fieldValue(this,i),u&&u.constructor==Array)for(e=0,o=u.length;e<o;e++)r.push({name:s,value:u[e]});else u!==t&&typeof u!=f&&r.push({name:this.name,value:u})}),n.param(r)},n.fn.fieldValue=function(i){for(var o,r,e=[],u=0,s=this.length;u<s;u++)(o=this[u],r=n.fieldValue(o,i),r!==t&&typeof r!=f&&(r.constructor!=Array||r.length))&&(r.constructor==Array?n.merge(e,r):e.push(r));return e},n.fieldValue=function(i,o){var d=i.name,h=i.type,p=i.tagName.toLowerCase(),l,a,c,y;if(typeof o==f&&(o=r),o&&(!d||i.disabled||h=="reset"||h=="button"||(h==s||h=="radio")&&!i.checked||(h=="submit"||h==u)&&i.form&&i.form.clk!=i||p==e&&i.selectedIndex==-1))return t;if(p==e){if(l=i.selectedIndex,l<0)return t;var w=[],b=i.options,v=h=="select-one",k=v?l+1:b.length;for(a=v?l:0;a<k;a++)if(c=b[a],c.selected){if(y=n.browser.msie&&!c.attributes.value.specified?c.text:c.value,v)return y;w.push(y)}return w}return i.value},n.fn.clearForm=function(){return this.each(function(){n("input,select,textarea",this).clearFields()})},n.fn.clearFields=n.fn.clearInputs=function(){return this.each(function(){var n=this,t=n.type,r=n.tagName.toLowerCase();t=="text"||t=="password"||r==l?n.value="":t==s||t=="radio"?n.checked=i:r==e&&(n.selectedIndex=-1)})},n.fn.resetForm=function(){return this.each(function(){var n=this;typeof n.reset!=o&&(typeof n.reset!="object"||n.reset.nodeType)||n.reset()})}})(jQuery);